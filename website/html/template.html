<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
     <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
     <meta name="author" content="Bill Winslow">
     <meta name="description" content="Making status updates on Aliquot Sequences easier. :)" >
     <link rel="icon" href="http://mersenneforum.org/favicon.ico">
     <link rel="Shortcut Icon" href="http://mersenneforum.org/favicon.ico">
     <style type="text/css">
          body      {{ background: #0000D2;
                    font-family: "sans serif";
                    color: #FFFFFF; }}
          .cen      {{ text-align: center; }}
          .just     {{ margin-left: 6%;
                    margin-right: 6%; }}
          footer    {{ text-align: center;
                    font-size: 70%; }}
          a         {{ color: #FF9B00; }}
          a.lol     {{ color: #FF8300; }}
          .dataTables_wrapper {{
                    width: 90%;
                    height: 100%;
                    text-align: center;
                    margin-left: auto;
                    margin-right: auto;
                    margin-bottom: 24px; }}
          table     {{ text-align: center;
                    color: #000000;
                    background-color: #05E9FF;
                    border-collapse: collapse;
                    font-size: 95%;
                    margin: 0 auto; }}
          td        {{ white-space: nowrap; }}
          img.center {{ display: block;
                     clear: both;
                     margin-left: auto;
                     margin-right: auto; }}
          th         {{ background-color: #E0E0E0;
                     font-size: 105%;
                     font-weight: bold;
                     cursor: pointer; }}
          .factorcol {{ text-align: left; }}
     </style>
     <script type="text/javascript" src="js/jquery.js"></script>
     <script type="text/javascript" src="js/jquery.dataTables.js"></script>
     <script type="text/javascript" src="js/dataTables.scroller.js"></script>
     <script type="text/javascript">
     $.fn.dataTableExt.afnFiltering.push(
       function(oSettings, aData, iDataIndex) {{
         if( document.getElementById('three').checked ) {{
           if( aData[4].indexOf("* 3 *") > -1 || aData[4].indexOf("* 3^") > -1 ){{
             return false;
           }}
         }}
         if( document.getElementById('driver').checked && aData[13] ) {{
           return false;
         }}
         if( document.getElementById('reserve').checked && aData[7] ) {{
           return false;
         }}
         var rmin = document.getElementById('min').value*1; // *1 converts str to int
         if( rmin != "" && aData[0] < rmin ) {{
           return false;
         }}
         var rmax = document.getElementById('max').value*1;
         if( rmax != "" && aData[0] > rmax ) {{
           return false;
         }}
         return true;
       }}
     );
     function specialSort(a, b) {{
     // x any y should be true if a or b are a date, false otherwise
       //console.log("a: "+a+' b: '+b);
       if( typeof a == "string" )
         x = a.indexOf('-') > -1; // true for date
       else x = false; // ints are not dates
       if( typeof b == "string" )
         y = b.indexOf('-') > -1; // true for date
       else y = false; // ints are not dates

       if( x ) {{
         if( y ) {{
           return (a < b) ? 1 : ( (a > b) ? -1 : 0);
         }} else {{
           return 1;
         }}
       }} else if( y ) {{
         return -1;
       }} else {{
         a = parseInt(a);
         b = parseInt(b);
         return (a < b) ? 1 : ( (a > b) ? -1 : 0);
       }}
     }}
     jQuery.fn.dataTableExt.oSort['special-asc'] = specialSort;
     jQuery.fn.dataTableExt.oSort['special-desc'] = function(a, b) {{ return -specialSort(a, b); }};
     $(document).ready(function() {{
       var oTable = $('#win').dataTable( {{
		"sScrollY": "577px",
		"sAjaxSource": "AllSeq.json",
		"sDom": '<"check">fritS',
		"aaSorting": [[ 1, "asc" ]],
		"bDeferRender": true,
		//"bAutoWidth": false,
		"aoColumnDefs": [
		     {{ "sClass": "factorcol", "aTargets": [3, 4] }}, // left justified
		     {{ "bSearchable": false, "bVisible": false, "aTargets": [12, 13] }}, // id and is_driver are totally invisible
		     // ~~three~~ two columns are rendered as links
		     {{ "fnRender": function (o, val) {{return '<a target="_blank" class="lol" href="http://factordb.com/sequences.php?se=1&aq='+val+'&action=last20">'+val+'</a>'}}, "bUseRendered": false, "aTargets": [0] }},
		     {{ "fnRender": function (o, val) {{return '<a target="_blank" class="lol" href="http://factordb.com/aliquot.php?type=1&aq='+o.aData[0]+'&big=1">'+val+'</a>'}}, "bUseRendered": false, "aTargets": [2] }},
		     //{{ "fnRender": function (o, val) {{return '<a target="_blank" class="lol" href="http://factordb.com/index.php?id='+o.aData[12]+'">'+val+'</a>'}}, "bUseRendered": false, "aTargets": [5] }},
		     {{ "sType": "special", "aTargets": [8] }} // special sort for progress column
		]
       }});
       $("div.check").html('Exclude sequences with a 3: <input type="checkbox" id="three"> &nbsp;'+
          'Exclude drivers: <input type="checkbox" id="driver"> &nbsp;'+
          'Exclude reserved sequences: <input type="checkbox" id="reserve"><br>'+
          'Range-filter sequence leaders: <input type="text" id="min" maxlength=7 size=7> - <input type="text" id="max" maxlength=7 size=7> <!--button type="button" id="button">Filter</button-->' );
       function redraw() {{ oTable.fnDraw(); }}
       $('#three').change( redraw );
       $('#driver').change( redraw );
       $('#reserve').change( redraw );
       $('#min').focusout( redraw );
       $('#max').focusout( redraw );
       //$('#button').mousedown( redraw );
     }});
     </script>
     <title>Current status of aliquot sequences with start term below 1 million</title>
</head>
<body>
     <h3 class="cen">Current status of aliquot sequences with start term below <s>1</s> <em>2</em> million</h3><br>
     <div class="cen just">
     <p>This is a page I put together inspired by schickel's AllSeq.txt, combined with the fact that finding a recent copy was a pain in the butt.
     This is supposed to make things easier (including easier sorting and data mining).
     This uses Syd's wonderful <a href="http://factordb.com/help.php?page=0">Factor DataBase</a> to get FDB's last <a href="http://factordb.com/sequences.php">known information</a>
     about an <a href="http://en.wikipedia.org/wiki/Aliquot_sequence">Aliquot sequence</a>. As such, if a worker hasn't updated the DB in a while or the DB has errors in a sequence,
     well... there's not much I can do about it.</p></div>

     <div class="just"><p><h4>Instructions:</h4></p>
     <p>This table makes use of a wonderful JavaScript library called DataTables created by <a href="http://datatables.net/index">this awesome group</a>
     whose work I found <a href="http://stackoverflow.com/questions/11304490/quick-html-table-sorting">thanks to StackOverflow</a>. DataTables in turn depends on
     <a href="http://jquery.com/">jQuery</a>. <br><br>
     It's got some awesome features: you can do multi-column sorts by clicking the primary column, and then shift-clicking the secondary columns (in order of priority);
     it sorts the table quickly, thanks to deferred rendering, meaning the sorted data is only rendered as you scroll. (This is why repeated PageDowns can cause lag.)
     Some potential uses of the multi-sort include finding the shortest sequence of size 111, or all sequences with size &lt; 115 with a certain driver.
     I also encourage you to use the search/filter feature (one of my favorite uses is searching by name), or the exclusion checkboxes.</p>

     <p>If you find a sequence you would like to extend, you should reserve it in <a href="http://www.mersenneforum.org">mersenneforum.org</a>'s
     <a href="http://www.mersenneforum.org/forumdisplay.php?f=90">Aliquot sequence</a> <a href="http://www.mersenneforum.org/showthread.php?t=11588">reservations thread</a>;
     That's the source for the reservations shown in this table. Also note that if the sequence is less than 10,000,
     there's a good chance it's being <a href="http://christophe.clavier.free.fr/Aliquot/site/clavier_table.html">worked on</a> by
     <a href="http://christophe.clavier.free.fr/Aliquot/site/Aliquot.html">Christophe Clavier</a>. All such reservation requests should be emailed to him. Also keep in mind
     that his work may not be in the FDB (and thus not in this table). Sequences between 10,000 and 100,000
     should also be checked further at MersenneForum, because this range was worked on by Clifford Stern. See
     <a href="http://www.mersenneforum.org/showthread.php?t=11625">this MF thread</a> for more details about or to ask about the status of sequences in these ranges.</p>

     <p>If you'd like to have the basic information available in the old AllSeq.txt format (to e.g. perform an analysis with grep, etc.), that can be found <a href="AllSeq.txt">here</a>.
     The plaintext list of every sequence being tracked is found <a href="SeqList.txt">here</a>, while the raw JSON data that the table presents is found <a href=AllSeq.json">here</a>.</p>

     <p><h4>Other Information</h4></p>
     <p>To keep load on the FDB to a minimum, the Python sequence-update script which tracks the data on this page runs roughly 100 sequences per hour; this is subject to change.
     Given the current total sequence count, that means each sequence is updated roughly <a href="http://www.wolframalpha.com/input/?i=18500%2F110%20hours">once a week</a>.
     Each sequence lists the date it was last updated. To further reduce FDB load, the script queries the FDB ID of the last unfactored line from the previous update.
     Only if that line is factored does the script actually request the much heavier sequence status page.</p>

     <p>Drivers and guides: I wrote a short <a href="https://github.com/MersenneForum/MersenneForumAliquot/blob/master/mfaliquot/aliquot.py">Python module</a>,
     based on the definitions and notes from Clifford Stern's <a href="analysis.html">Analysis page</a>,
     in order to classify the sequences in the table. The only exception to Clifford's definitions I use is to present the power of two as a "guide" if a "proper" guide is lacking.
     The guide column does show proper drivers, though there is a checkbox to exclude sequences controlled by a driver (as well as a box to exclude sequences with a
     (pesky) 3 in them). The class shown is exactly the "class" described by Clifford in his page.</p>

     <p>At kar_bon's suggestion, the script now also records the FDB ID of the last line, to try and detect merges. The merge finder is run after each hourly update.
     The main drawback is that a merged sequence could advance between getting the info for one branch and the info of the other, meaning that such a merge would go undetected.
     In practice this doesn't seem to be a problem.</p>

     <p>At fivemack's suggestion, the script now also tracks the last time a sequence was lengthened. If, at the current update, a sequence is longer than at the previous update,
     the "Recent Progress" column displays the total increase in length. If a sequence has not been extended, then the date of the last extension is shown.
     (The FDB doesn't seem to have recorded dates before 2011-03-17.)</p>

     <p>As you've probably noticed, this table is also capable of reading the current reservations from the lead post of the reservations thread. <s>The time reported is
     the last edit date of that post.</s> Ensuring the post(s) was up to date turned out to be quite tedious; the reservations thread is now actively spidered from offsite,
     where the resulting reservations table is also kept. The time shown is the last time the reservations spider was run.
     The reservations are all updated independently of the sequence data, meaning <em>every</em> reservation is up to date (modulo the spider frequency), unlike the sequence data.</p>

     <p>There is also a <a href="statistics.html">statistics page</a> based on the data in the table. Check back every so often for new features.</p>

     <p>If you want to request a feature, report a bug, offer an idea for the stats page, or otherwise discuss the table, please use
     <a href="http://www.mersenneforum.org/showthread.php?t=16965">this MF thread</a>.</p>

     </div>

     <br>
     <div class="cen">
          <p>All times are UTC. Reservations are as of {:s}. <br />
          <!--<p>All times are UTC. <strong>Reservations are not up to date!</strong> <br /> -->
                         These sequences are currently broken: {:s}</p>
          {:s}
     </div>
     <br />
     <table id="win" border="1" bordercolor="#B8B8B8" cellpadding="2" cellspacing="0">
       <thead>
          <tr class="headerrow">
          <th>Sequence</th>
          <th>Size</th>
          <th>Index</th>
          <th>Guide</th>
          <th>Known Factors</th>
          <th>CSize</th>
          <th>Class</th>
          <th>Reservation</th>
          <th>Progress</th>
          <th>Last Updated</th>
          <th>NZilch</th>
          <th>Prio</th>
          <th>Hidden ID</th>
          <th>Hidden Driver Bool</th>
          </tr>
       </thead>
       <tbody>
       </tbody>
     </table>
     <footer>
       <img src="facepalm_picard_riker.jpg" class="center" alt="Fin du page">
       <p>This site was created by Dubslow, with contributions from (so far just) ChristianB.</p>
       <p>The source code is maintained <a href="https://github.com/dubslow/MersenneForumAliquot">here</a>.</p>
     </footer>
</body>
</html>
